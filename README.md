# The Engineering SketchPad
summarise covering everything in githubs doc format for readme.md file:Engineering Sketch Padhttps://acdl.mit.edu/ESP/Geometry in CFDThe current use of geometry in design processes is ad hoc and often consists of various tools. Conceptual Design toolssuggest the shape but do not realize 3D geometry. Some disciplines have early-stage specialized tools that build 3Dparametric models, but they do not consider the larger multidisciplinary design. Some disciplines remain "geometry free"during design, resulting in errors and a different final realized geometry.A single, multidisciplinary geometry modeling system is needed to support complex geometric requirements in later stages.The system should generate geometries that do not need fixing or repair, and output the designed geometry seamlessly forcommercial CAD systems to import the model without loss of accuracy in the shapes represented.Relegating commercial CAD to the end of the design process may be surprising, but its focus has been, and is,manufacturing, not analysis. The current state of affairs is partly due to the focus on manufacturing rather than analysis.Use of Geometry in Meshing● A gap exists between creating geometry and analyzing geometry. This is due to the process first creating the geometry,then transferring the geometry information from a CAD-based geometry to a meshing tool, and then finally to theappropriate analysis tools.● The usual connection between high-fidelity analysis codes and geometry is performed by a grid generator.● 3D meshing software ultimately requires topological information to realize a closed “watertight” model.● Each instance of the Master-Model/Feature tree is a BRep. Boundary Representations (BReps) are the standard data modelthat holds both the geometric and topological entities that supports the concept of a “solid”.● The topology is directly related to both the design intent of the Feature Tree and the construction methods of theunderlying CAD system.● BReps have a tolerance that determines the meaning of “closure” for connected entities.● To deal with gaps and overlaps without a program halt which then requires intervention, we can either “fix” the geometryor the Breps created.● Currently, most BRep-based applications “fix” the geometry by representing the the geometry definition in a differentmanner. This causes various side effects like inconsistencies, errors, complexity and this process itself is not automatic,hence it needs to be done manually and thus, is time consuming.There has been tremendous progress since early CAD softwares but there are still some drawbacks for its usage in the MDAO environment.File FormatsEach CAD system or geometry kernel uses a different mathematical formulation to represent the same types of surfaces, and also have differenttolerances for closure. Therefore, while transferring data it may be found that the model may be open now again and need patching.- IGES file format contains data that is defined as disjoint and unconnected surfaces and curves, with no explicit notion of topology.- STEP file format supports topology as well as geometry. This format is seldom used in practice as constructing a STEP reader iscomplex and requires a complete solid modeling geometry kernel to deal with the data.- STL combines a discretized view of the Brep as well as its geometry and topology can provide a complete, and easier to use, accesspoint. (Needs further study why its not used in flow analysis)- EGADS- NMBA CAD-based ApproachPros● Defeaturing for design progression and multi disciplinary process● Consistency in design process (using same suite of parameters)● Ability to take feedback to make corrections due to parameterisationCons● Expensive CAD licenses● Geometry files incompatible with mesh generators and must undergotedious “CAD healing” during the meshing process● Redesigned geometry alterations for different disciplinary analysis islikely to conflict with the definitions of the original geometry● Proprietary formats that are hard to generate and modify externally● Specialized construction not available as primitives are pre-defined(inability to create fully-parametric user-defined primitives)● Incompatible parameterisation● Very scarce training for using Parametric CAD in MDAOCurrent methods to achieve these objectives is Constructive Solid Geometry (CSG) using Conceptual Design tools; this is thenatural foundation on which the modelling techniques are based, allowing flexibility in creating complex structures fromsimple components.Next, a combination of 2 approaches is used - CAD systems and their “feature” based view of construction, and Bottom-Upmethods which generate solid “components”.To realise the MDAO objectives via the Bottom-Up approach, EGADS, a new software suite is built as well as entire ESParchitecture, which is explained next.● To support the entire Multi-Disciplinary Analysis and Optimization (MDAO) process fromconceptual to detail design in a seamless manner, as well as multi fidelity analysis.● To make the process user-friendly and support for automation to minimize unnecessary orrepetitive human effort.Objectives● OpenCASCADE○ Fully functional Open-Source Solid modeling geometry kernel○ Creates geometry primitives and generates BRep model○ Performs Bottom-Up construction and CSG operations○ Fully Object-Oriented C++ APIOpenCASCADEESPParts of ESP ArchitectureOpenCASCADEEGADSESP● EGADS (Electronic Geometry Aircraft Design System)○ Open source, object-Based software built on top of OpenCASCADE○ procedural-based API reducing the level of programming complexityand the huge suite of methods of OpenCASCADE○ Full support for current platforms and can be driven by multiple userapplications○ outputs STEP file as well as native EGADS formatParts of ESP ArchitectureOpenCASCADEEGADSOpenCSMESP● OpenCSM is built on EGADS○ Parameters each having unique names are all stored as two-dimensional arrays offloating point numbers (parameters can either be external or internal)○ Feature trees are defined in terms of a binary-like tree of branches. Each branch hasan associated type which describes the operation to be performed. Branches canhave zero to two parents.○ While not strictly object-oriented, the API has been designed in an object-basedmanner, making it directly interfacable with object-oriented systems○ Extensible via user-defined primitives and directly provides sensitivitiesParts of ESP ArchitectureESP is a browser-based system at the top of the architecture which provides the user the ability to interact witha configuration by building and/or modifying the design parameters and feature tree that define theconfiguration.● Captures the design intent in a simple, easy to read, nonproprietary text file (ASCII) that is easilymodifiable by any other component in an MDAO environment, viewed in a web-based GUI.● Supports easy integration into a larger process by allowing geometry import/export using file standards(either discrete or analytic) and direct connections to a number of 3D grid generators, preventing loss ofcritical information when the standard does not support the data in the current available systems.● The ability to easily add customized features to the system. (UDPs)ESP● Provides attribution at all levels, which is an essential capability when one wants toconnect (in a multi-disciplinary way) the various parts of the various representations.● Supports the generation of multiple models from the same parameterization andprovides for Backward compatibility due to non-sequential design workflow (Phase).● Open-source and is not encumbered with any licensing restrictions. CAPS librariesthrough AIM plugins enables an MDAO environment freely.● Provides analytic parameter sensitivity (for much of the build), making it suitable forthe gradient-based optimization processes that are frequently used in MDAOenvironments. The sensitivity of any part of a configuration with respect to any designparameter.CAPSESP AIMspyCAPS: A Python Interface to the Computational Aircraft Prototype SynthesesCAPS stands for "ComputationalAircraft Prototype Syntheses". It isan infrastructure for multifidelity,multidisciplinary modeling that canbe integrated within a framework.CAPS enables physics-baseddesign by analysis and managesthe flow of information betweenthe geometry subsystem, variousanalysis interface modules (AIMs),and the environment driven by anexternal design process.CAPS API● Enhances automation by tightly coupling analysis with geometry and allow interdisciplinary analysis with “field” datatransfer and also does not replacing optimization algorithms● Provides the tools and techniques for generalizing analysis coupling like in multidisciplinary coupling andmulti-fidelity coupling● Provides the tools for rigorously dealing with geometry (single and multi-fidelity) in a design process whereOpenCSM connects design parameters to geometry and CAPS itself connects geometry to analysis tools.● It hides all of the individual analysis details but does not make analysis tool a “black box”● Intends to input and attribution driven automated (not automatic) meshingAnalysis Interface Module (AIM) is used to interface between CAPS framework and analysis toolsLow Fidelity- AWAVE- FRICTION- AVL- XFoilStructural Analysis- Masstran- MYSTRAN- NASTRAN- ASTROS- TACSMeshingSurfaceNative EGADSAFLR4VolumeTetGenAFLR3Pointwise3D CFDCart3DFun3DSU2model is watertight after importing fromexternal sources● Supports easy integration into a larger process by allowing geometry import/export using file standards (eitherdiscrete or analytic) and direct connections to a number of 3D grid generators, preventing loss of critical informationwhen the standard does not support the data in the current available systems.Step by Step Process of a Designing a Wing in ESPIntegrated EnvironmentIncluding CFD SimulationEach step is a Phase.Geometry Creationusing Low Fidelity Analysis toolsAttributionI. Airfoil SectionUsing Xfoil, to generate naca airfoil of appropriate characteristics optimised with respect toCl/Cd valueshttps://web.mit.edu/drela/Public/web/xfoil/Camber CalculationsMaximum thickness CalculationsLocation of Maximumcamber CalculationsMSES code could be used for shapeoptimisation after Xfoil analysis.II. WingUsing AVL, to generate wing of appropriate characteristics optimised with respect totaper ratiohttps://web.mit.edu/drela/Public/web/avl/Wing OptimisationStructural AnalysisVarious software analysis suites like masstran and MYSTRAN canbe used to optimise the material composition, integrity as well asother structural characteristics of the model, especially the fuselage.SensitivitiesWhat is sensitivity? Why is it important?Sensitivity is the gradient of the objective and constraint functions with respect to variables of the environment(like design).It is important so that we can verify the accuracy our results (like to reduce spatial discretization errors).One major goal is obtaining sensitivities of output functionals to CAD design parameters. Among the variousproposed methods, the Computational Aircraft Prototype Syntheses (CAPS), shipped with Engineering SketchPad (ESP), caught the interest of the researches due to its demonstrated capability to construct solid geometryfrom CAD-like parameters, calculate parametric sensitivities, and handle geometric constraints efficiently. Inaddition, this framework includes APIs to flow solvers like SU2 and meshing packages, allowing efficient fielddata communication among the geometry builder, meshing software, and SU2 solver to calculate parametricsensitivities.Mesh GenerationI. Surface MeshingAFLR4I. Volume MeshingAFLR33D CFD AnalysisSU2All ESP Publications are available at this site.https://acdl.mit.edu/ESP/Publications/?C=D;O=A
